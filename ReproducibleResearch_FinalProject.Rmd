---
title: 'Reproducible Research: Final Project'
author: "Alejandro Osorio"
date: "September 2018"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
```

## Excecutive Summary

### Results Obtained

## Appendix 1: Methodology

### Measuring harm to population health

Harm to population health was quantified through the total number of deceased and injured human beings, caused by each event.  For that purpose, variables 'FATALITIES' and 'INJURIES' were used as total numbers of each type of harm, for each event.

### Measuring economic damage

Economic damage was quantified calculating the total of US Dollars lost due to damaged properties or crops.  Variables 'PROPDMG' and 'CROPDMG' (dimensions of total damage to properties and crops respectivelly), plus 'PROPDMGEXP' and 'COPDMGEXP' (magnitude of the previous dimensions).  Detailed calculations in Appendix 2.

### Final variables required

PENDIENTE

## Appendix 2: Getting and Preparing Dataset

### Reading Data
```{r cars, cache = TRUE, results = "hide"}
dataoriginal <- read_csv("repdata%2Fdata%2FStormData.csv")
```

### Preparing Dataset

#### Identifying columns without NAs

```{r}
which(colSums(is.na(dataoriginal)) == 0)
```

Fortunately, almost all variables required by the methodology (see Apendix 1) were complete.  Only 'PROPDMGEXP' and 'CROPDMGEXP' required further analysis. Therefore, the dataset that required further analysis, was:

```{r}
datafinal <- select(dataoriginal, c(1,2,5,7,8, 23:28))
```


#### 'PROPDMGEXP' and 'CROPDMGEXP' NAs analysis

If NAs in these variables are asociated with a zero value on the 'PROPDMGEXP' and 'CROPDMGEXP' respectively, they would be considered complete (zero times any magnitude is zero).  Therefore:

##### PROPDMGs without magnitudes:
```{r}
wrongpropdmg <- with(datafinal, which(is.na(PROPDMGEXP) & PROPDMG != 0))
wrongpropdmg
```

So only 76 rows had variable 'PROPDMG' with a non zero value and no magnitude.  These rows were therefore eliminated from the dataset, as follows:

```{r}
datafinal <- datafinal[-wrongpropdmg,]
```

##### CROPDMGs without magnitudes:

Likewise, 
```{r}
wrongcropdmg <- with(datafinal, which(is.na(CROPDMGEXP) & CROPDMG != 0))
wrongcropdmg
```

Eliminating
```{r}
datafinal <- datafinal[-wrongcropdmg,]
```

Final check
```{r}
with(datafinal, which((is.na(CROPDMGEXP) & CROPDMG != 0)|is.na(CROPDMGEXP) & CROPDMG != 0))
```

## Appendix 2: Preliminary Analysis

## Appendix 3: 

